<!-- Use the array of pages passed as a param -->
{{ range . -}}
<!-- Don't process empty content files -->
  {{- if ne (len .Content) 0 -}}
    <!-- Remove the <hr /> tag generated by blackfriday for footnotes -->
    {{- $content := replace .Content "<div class=\"footnotes\">\n\n<hr />" "<div class=\"footnotes\">" -}}
    <!-- Split the processed content by <hr /> tag -->
    {{- range (split $content "<hr />") -}}
      <!-- Only wrap in <section> tag if not already wrapped by shortcode -->
      {{- if not (in . "data-noprocess") -}}
<section>
          {{- end -}}
  {{- . | safeHTML -}}
</section>
    {{- end -}}
  {{- end -}}
{{- end }}
